<!DOCTYPE html>
<!--[if lt IE 7]>      
	<html class="no-js lt-ie9 lt-ie8 lt-ie7"> 
	<![endif]-->
<!--[if IE 7]>         
	<html class="no-js lt-ie9 lt-ie8"> 
	<![endif]-->
<!--[if IE 8]>         
	<html class="no-js lt-ie9"> 
	<![endif]-->
<!--[if gt IE 8]>
	<html class="no-js"> 
	<![endif]-->
<!-- [endif]-->
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title></title>
        <link rel="stylesheet" href="./css/normalize.css">
        <link rel="stylesheet" href="./css/main.css">
        <script src="./js/vendor/modernizr-2.6.2.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a>.</p>
        <![endif]-->
        
        <div id="header">
        	<div class="container">
           		<h1>The true speed of a car</h1>
           	</div>
           	<div class="top">
           		<a class="link" href="./index.html#settings">[Settings]</a>
           	</div>	
        </div>

        <!-- start content  -->
        <div id="main" class="container">
			 
			<div id="start" class="card">
				<h2>Start</h2>
				
				<div class="box">
					<div class="action">
						<p><a class="link" href="./index.html#details">[image of car]</a></p>
						<span><b>Mario has a speed of <code>%[car.speed]%</code> km/h.</b></span>
					</div>
				</div>
				
				<div class="expand">
					<p class="view">Comment [ + ]</p>
					<div class="comment">
				  		<p class="proposal">the arrangement of the views is not settled - this is still a sketch ... nevertheless, it is important that the start page illustrates the apps options with a single look - christopher.</p>
					</div>
				</div>
				
			</div>
			
			<div id="details" class="card">
				<h2>Calculation</h2>
				
				<div class="expand">
					<p class="view">Comment [ + ]</p>
					<div class="comment">
						<p class="proposal">repeat the input ... and how? both, details and compare view are too large for mobile screens - christopher</p>
					</div>
				</div>
				
				<div class="box">
				 	<h3>Way</h3>
				 	<p>The total path of the way to the workplace is <code>%[calculated.way.total]%</code> km per year <a class="link" href="./index.html#appendix">[*]</a>.</p>
				 	<p><del>We can calculate the <em>door-to-door</em> speed of in a very simple way, with the classic <em>space / time</em> formula: it is [! <code>OUT</code> !] km/h. [*]</del></p>
				 	
				 	<p><a class="input" href="./index.html#way">[ Based On ]</a></p>
				 	
				 	<div class="expand">
						<p class="view">Comment [ + ]</p>
				 		<div class="comment">
                  			<p class="note">i think the &quot;door-to-door&quot; speed is distracting the user from the real apps message (and will not help the bike too) - christopher</p>
                      	<p class="proposal">Not really the same. It could be interesting to make people think that they see, for instance, 60 km/h in their speedometer -- but if they take into consideration also the time they spend looking for the parking place, walking from the parking lot to the destination, etc. their speed is, say, 25 km/h. And if they consider also the costs involved, and the time they spend to earn the money to pay the cose, their speed is 7 km/h. - Loris</p>
                 		</div>
                 	</div>
                 	
                </div>
        
				<div class="box">
				 	<h3>Vehicle</h3>
				 	<p>The person spends &euro; <code>%[calculated.vehicle.upkeeping]%</code> per year for the upkeeping of the <code>%[calculated.vehicle.type]%</code>.</p>
				 	<p><code>if car/motorcycle:</code><br>
				 She /he also spends &euro; <code>%[calculated.vehicle.spendings</code>]%  each year for fuel.</p>
				 	<p>And don&apos;t forget the vehicle itself, which costs &euro; <code>%[calculated.vehicle.costs]%</code> each year.</p>
				 	<p>Thus the total expenses per year are &euro; <code>%[calculated.vehicle.total]%</code>.</p>
				 	
				 	<p><a class="input" href="./index.html#vehicle">[ Based On ]</a></p>
				 	
				</div>
				
				<div class="box">
				 	<h3>Time</h3>
				 	<p>What do costs have to do with the speed?</p>
				 	<p>Within a year, how much time does the person spend to travel?. We have to take into consideration not only the <code>%[calculated.time.way</code>]% hours on driving, but also the time the person has to work to afford the vehicle - <code>%[calculated.time.work]%</code> hours.</p>
				 	<p>In total, it is therefore <code>%[calculated.time.total]%</code> hours.</p>
				 	<p><a class="input" href="./index.html#time">[ Based On ]</a></p>
				 	
				</div>
				
				<div class="box">
				 	<h3>Summary</h3>
				 	<p><strong>The generalized velocity is: <code>%[calculated.way.total]%</code> km / <code>%[calculated.time.total]%</code> h, ie. <code>%[calculated.speed]%</code> km/h</strong></p>
				</div>
				
				<div class="action">
					<span>And you? What is your own speed?</span>
					<p>[<a class="link" href="./index.html#compare">Compare</a>]</p>
				</div>
			
			</div>
			
			<div id="compare" class="card">
				<div id="input" class="front panel">
					<h2>Input</h2>
					
					<div id="example" class="box">
						<ul>
						</ul>
						<button>getDefaultData</button>
					</div>
				
					<div id="way" class="data">
				 		<h3>Way</h3>
				 		<p class="fields">
				 			<label for="way.duration">Duration: </label>
				 			<input type="text" name="way.duration" value="way.duration"></input> minutes<br>
				 			<label for="way.duration">Distance: </label>
				 			<input type="text" name="way.distance" value="way.distance"></input> kilometers. <a class="link" href="./index.html#appendix">[*]</a><br>
				 			<label for="way.times">Times: </label><input type="text" name="way.times" value="way.times"></input> times a day</p>
				 		</p>
				 		
				 		<div class="expand">
				 			<p class="controller">Comment [ + ]</p>
				 			<div class="comment">
				   				<p class="proposal">the route, eg. the <code>way.distance</code> can be computed, with the help of a map to display, as already talked about. this would be then the asked foreign apis.</p>
				 			</div>
				 		</div>
				 		
					</div>
				
					<div id="vehicle" class="data">
				 		<h3>Vehicle</h3>
				 		
				 		<p class="fields">
				 			<label for="vehicle.type">Vehicle: </label>
				 			<select name="vehicle.type">
								<option value="car">car</option>
      							<option value="bike">bike</option>
      							<option value="public">public</option>
							</select>
						</p>
						
						<p class="fields">
							<label for="vehicle.type">Price: </label> 
				 			<input type="text" name="vehicle.price" value="vehicle.price"></input> &euro;<br>
				 			<label for="vehicle.years">Use length: </label>
				 			<input type="text" name="vehicle.years" value="vehicle.years"></input> years<br>
				 			<label for="vehicle.usage">Private usage: </label>
				 			<input type="text" name="vehicle.usage" value="vehicle.usage"></input> %
				 		</p>
				 		
				 		<p class="fields">
				 			<code>if car/motorcycle:</code><br>
				 			<label for="vehicle.fuel">Fuel price: </label>
				 			<input type="text" name="vehicle.fuel" value="vehicle.fuel"></input> &euro; per liter<br>
				 			<label for="vehicle.consumption">Consumption: </label>
				 			 <input type="text" name="vehicle.consumption" value="vehicle.consumption"></input> liter per 100 km
				 		</p>
				 		
				 		<p class="fields">
				 			<label for="vehicle.insurance">Insurance: </label>
				 			<input type="text" name="vehicle.insurance" value="vehicle.insurance"></input> &euro;<br>
							<label for="vehicle.tax">Tax: </label>
							<input type="text" name="vehicle.tax" value="vehicle.tax"></input> &euro;<br>
							<label for="vehicle.maintenance">Maintenance: </label>
							<input type="text" name="vehicle.maintenance" value="vehicle.maintenance"></input> &euro;<br>
							<label for="vehicle.other">Other: </label><input type="text" name="vehicle.other" value="vehicle.other"></input> &euro;
						</p>
						
						<div class="expand">
				 			<p class="view">Comment [ + ]</p>
				 			<div class="comment">
				  				<p class="proposal">still searching for some simple &amp; selfdiscribing names, especially for the tabs/views, but as you can see by the input names, the model is not optimal too - christopher.</p>
				 			</div>
				 		</div>
				 		
					</div>
				
					<div id="time" class="data">
				 		<h3>Time</h3>
				 		<p class="fields">
				 			<label for="time.hours">Work hours: </label>
				 			<input type="text" name="time.hours" value="time.hours"></input> a day<br>
				 			<label for="time.hours">Work days: </label>
				 			<input type="text" name="time.days" value="time.days"></input> a year.
				 		</p>
				 		<p class="fields">
				 			<label for="time.hours">Salary: </label>
				 			<input type="text" name="time.salary" value="time.salary"></input> per year.
				 		</p>
			    	</div> 
			    	
				</div>
				
				<div class="action flip">
				 	<p>[ Compute ]</p>
				</div>
				
				<div id="output" class="back panel">
					<h2>Output</h2>
			
					<dl>
						<dt>Car:</dt>
						<dd>Traveling by car you have a speed of <code>%[car.speed]%</code> km/h. <a class="link" href="./index.html#details">[ Calculation ]</a></dd>
				
						<dt>Cycling:</dt>
						<dd>Traveling the same way by bicycle you have a speed of <code>%[bike.speed]%</code> km/h. <a class="link" href="./index.html#details">[ Calculation ]</a></dd>
					
						<dt>Walking:</dt>
						<dd>Just walking you have a speed of <code>%[walk.speed]%</code> km/h.</dd>
					</dl>
					
					<div class="expand">
						<p class="model">Comment [ + ]</p>
						<div class="comment">
					 		<p class="note">change it to public transport or add public transport? - loris</p>
					 		<p class="proposal">change, because only few people just walk to work and i think three compares a just fine, but seems like motorcycling is important in italy too - christopher</p>
					 	</div>
					</div>
				
					<p>[ Save data ]</p>
				
					<div class="expand">
						<p class="model">Comment [ + ]</p>
						<div class="comment">
              				<p class="note">it can be something added later. Could be useful to let people share their information (you could get a unique URL for your data, for instance) - loris</p>
						</div>
					</div>
					
				</div>
				
			</div>
			
			<div id="settings" class="card">
				<h2>Units</h2>
				<form>
					<fieldset>
						<label for="way">Distance: </label>
						<select name="way">
							<option value="km">km</option>
      						<option value="miles">miles</option>
						</select>
					</fieldset>
					<p>
					<fieldset>
						<label for="fuel">Capacity: </label>
						<select name="fuel">
							<option value="liter">l</option>
      						<option value="gallon">g</option>
						</select>
					</fieldset>
					<p>
					<fieldset>
						<label for="money">Currency: </label>
						<select name="money">
							<option value="euro">EUR</option>
      						<option value="dollar">USD</option>
						</select>
					</fieldset>
				</form>
			</div>
			
			<div id="appendix" class="card">
				<h2>Appendix *</h2>
				
				<div class="expand">
					<p class="view">Comment [ + ]</p>
					<div class="comment">
						<p class="proposal">This should contain explanations about the different parameters (which?) as well as a help section (and information about the makers ?) - christopher.</p>
					</div>
				</div>
				
			</div>
			
		</div>
        <!-- end content  -->
        
        <div id="footer">
           <div class="container">
        		<ul>
        			<li title="start" class="active"><a class="link" href="./index.html#start">Start</a></li>
        			<li title="details"><a class="link" href="./index.html#details">Calculation</a></li>
        			<li title="compare"><a class="link" href="./index.html#compare">Comparison</a></li>
        			<li title="appendix"><a class="link" href="./index.html#appendix">About</a></li>
        		</ul>
        	</div>
         </div>

        <script src="./js/vendor/jquery-1.9.0.min.js"></script>
        <script src="./js/plugins.js"></script>
        <script src="./js/main.js"></script>
        <script>
         $(document).ready(function() {
         	
        	var link = $(".link");
		  	link.click(function() {
		  		var target = $(this).attr('href');
		  		var hash = target.indexOf("#");
		  		var name = target.substring(hash);
		  		var main = $("#main");
		  		var card = $(name);
		  		var list = $("#footer div ul");
		  		var items = list.children();
		  		var tab = items.filter(function(i) {
		  			if ($(this).attr('title') === name.substring(1)) {
		  				$(this).removeClass("passive");
		  				$(this).addClass("active");
		  			}
		  			else {
		  				$(this).removeClass("active");
		  				$(this).addClass("passive");
					}
				});
				main.children().hide();
				card.show();
				if (name.substring(1) == "compare") {
					card.children("div.front").show();
					card.children("div.front").children().show();
					card.children("div.action").show();
		  			card.children("div.back").hide();
		  		}  			  		
		  	});
		  	
		  	var expand = $(".expand p");
		  	expand.click(function () {
				$(this).next("div.comment").toggle();
		  	});
		  	
		  	var look = $(".flip"); 
		  	look.click(function () {
		  		$(this).prev("div").hide();
		  		$(this).next("div").show();
		  		$(this).hide();
		  	});	
		  	
		  	var details = $(".input");
		  	details.click(function() {
		  		var target = $(this).attr('href');
		  		var hash = target.indexOf("#");
		  		var box = target.substring(hash);
		  		var main = $("#main");
		  		var card = $("#compare");
		  		var frontpanel = $("#compare div.front");
		  		var backpanel = $("#compare div.back");
		  		var action = $("#compare div.action");
		  		main.children().hide();
		  		card.show();
		  		frontpanel.show();
		  
		  		var boxes = frontpanel.children("div");
		  		var detail = boxes.filter(function(i) {
		  			if ($(this).attr('id') === box.substring(1)) {
		  				$(this).show();
		  			}
		  			else {
		  				$(this).hide();
		  			}
		  		});
		  		
		  		backpanel.hide();
		  		action.hide();
		  		
		  	});
		  	
         	var json = './data/transport.json';
         	var mario = {};
         	$.getJSON(json, function(data) {
         		mario = data[0];
         	}); 
         	
         	var button = $("#example button");
         	
		  	var input_panel = $("#compare div.front");
		  	var data_panels = input_panel.children("div.data");
		  	
		  	button.click(function() {
		  	
		  		data_panels.filter(function(i) {
		  			var id= $(this).attr("id");
		  			var paragraphs = $(this).children("p.fields");
		  			paragraphs.filter(function(i) {
		  				var inputs = $(this).children("input");
		  				$.each(inputs, function(i,t) {
		  					var input_name = $(this).attr("name");
		  					var input_value;
		  					var group;
		  					var pairs = {};
		  					$.each(mario, function(table,values) {
		  						if (table === id) {
		  							group = table;
		  							pairs = values;
		  						}
		  					});
		  				
		  					$.each(pairs, function(key,value) {
		  						if (input_name === group + "." + key) {
		  							input_value = value;
		  						}
		  					});
		  					$(this).attr("value",input_value);
		  				});
		  			});  		
				});
			
			});
		  	
		 }); 	
        </script>
        
    </body>
</html>
